{% extends "base.html" %}

{% block title %}Quarantine - Email Security Tool{% endblock %}

{% block content %}
<div class="flex min-h-screen">
    {% include 'partials/sidebar.html' %}
    
    <div class="flex-1 ml-64">
        {% include 'partials/header.html' %}
        
        <main class="p-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h1 class="text-2xl font-bold flex items-center gap-3">
                        <i class="fas fa-radiation text-yellow-400"></i>
                        Quarantine
                    </h1>
                    <p class="text-gray-400">{{ emails|length }} isolated threats</p>
                </div>
                
                <button class="px-4 py-2 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-all flex items-center gap-2">
                    <i class="fas fa-trash"></i>
                    Delete All
                </button>
            </div>
            
            <div class="bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 mb-6">
                <div class="flex items-start gap-3">
                    <i class="fas fa-exclamation-triangle text-yellow-400 mt-0.5"></i>
                    <div>
                        <h3 class="font-semibold text-yellow-400">Quarantine Zone</h3>
                        <p class="text-sm text-gray-300">These emails have been isolated due to detected threats. Review carefully before restoring.</p>
                    </div>
                </div>
            </div>
            
            <div class="space-y-4">
                {% for email in emails %}
                <div class="bg-cyber-card border border-red-500/30 rounded-xl p-6">
                    <div class="flex items-start gap-4">
                        <div class="w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center shrink-0">
                            <i class="fas fa-skull-crossbones text-red-400"></i>
                        </div>
                        
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-3 mb-1">
                                <span class="font-semibold">{{ email.fromName }}</span>
                                <span class="text-gray-500 text-sm">{{ email['from'] }}</span>
                                <span class="px-2 py-0.5 rounded bg-red-500/20 text-red-400 text-xs font-medium">
                                    {{ email.riskScore }}% Risk
                                </span>
                            </div>
                            <p class="text-gray-300 mb-2">{{ email.subject }}</p>
                            
                            <div class="flex flex-wrap gap-2 mb-4">
                                {% for threat in email.threats %}
                                <span class="px-2 py-0.5 rounded bg-red-500/10 text-red-400 text-xs">{{ threat }}</span>
                                {% endfor %}
                            </div>
                            
                            <div class="flex items-center gap-3">
                                <a href="{{ url_for('email_detail', email_id=email.id) }}" class="px-4 py-2 rounded-lg bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 transition-all text-sm">
                                    <i class="fas fa-eye mr-1"></i> View Details
                                </a>
                                <button class="px-4 py-2 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-all text-sm">
                                    <i class="fas fa-undo mr-1"></i> Restore
                                </button>
                                <button class="px-4 py-2 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-all text-sm">
                                    <i class="fas fa-trash mr-1"></i> Delete
                                </button>
                            </div>
                        </div>
                        
                        <div class="text-right shrink-0">
                            <p class="text-gray-500 text-sm">{{ email.date[:10] }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </main>
    </div>
</div>
{% endblock %}
